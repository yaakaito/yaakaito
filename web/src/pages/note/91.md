---
layout: ../../layouts/blog-post.astro
title: "ES Module ã® import defer"
emoji: ğŸ¦¥
date: 2025-08-22T11:59:48Z
tags:
    - note
---

TypeScript 5.9 ã®å‘ŠçŸ¥ã‚’è¦‹ã¦çŸ¥ã£ãŸã®ã ãŒã€ import ã¯ã™ã‚‹ãŒãã®è©•ä¾¡ã‚’é…å»¶ã™ã‚‹ã€ã¨ã„ã†æ§‹æ–‡ãŒ ES ã® Stage 3 ã«ãªã£ã¦ã„ã‚‹ã€‚

- https://devblogs.microsoft.com/typescript/announcing-typescript-5-9/
- https://github.com/tc39/proposal-defer-import-eval/

å¾“æ¥ `import` ã‚„ `require` ã¨åŒæ™‚ã«å¤§ããªå‰¯ä½œç”¨ãªã‚ã‚‹ã‚ˆã†ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’èª­ã¿è¾¼ã‚€éš›ã€ãã‚Œã‚’å®Ÿéš›ã«ä½¿ç”¨ã™ã‚‹ã¾ã§èª­ã¿è¾¼ã¿ã‚’é…å»¶ã™ã‚‹ã‚ˆã†ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ãŒã‚ã£ãŸã€‚ä¾‹ãˆã°ã€ `require` ã‚’ä½¿ã£ãŸæ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã‚ã‚‹ï¼ˆ Proposal ã‹ã‚‰ã®å¼•ç”¨ï¼‰:

```js
// https://github.com/tc39/proposal-defer-import-eval/?tab=readme-ov-file#motivation
exports.doSomething = function (target) {
  const operation = require('operation');
  return operation(target);
}
```

ã“ã‚Œã‚’è§£æ±ºã™ã‚‹ã‚¹ãƒãƒ¼ãƒˆãªæ§‹æ–‡ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒææ¡ˆã•ã‚Œã¦ã„ã‚‹ï¼ˆ Proposal ã‹ã‚‰ã®å¼•ç”¨ï¼‰:

```js
// https://github.com/tc39/proposal-defer-import-eval/?tab=readme-ov-file#proposal
import defer * as yNamespace from "y";
```

é »åº¦ã¯ãã†é«˜ããªã„ãŒã€ ESM ã§æ›¸ã„ã¦ã„ã‚‹å ´åˆã« `require` ã®ä¾‹ã®ã‚ˆã†ãªè¨˜è¿°ã‚’ã™ã‚‹ã“ã¨ã¯è«¦ã‚ã¦ã„ãŸã®ã§ã€ãªã‚‹ã»ã©ãªãã¨ãªã‚‹ææ¡ˆã ã£ãŸã€‚