---
layout: ../../layouts/blog-post.astro
title: "Dev Container ã§ Chrome æ‹¡å¼µã‚’ Playwright ã§ãƒ†ã‚¹ãƒˆã™ã‚‹"
emoji: ğŸ‹
date: 2025-06-17T20:50:46Z
tags:
    - note
---

Playwright ã¯ Chrome æ‹¡å¼µã‚‚ãƒ†ã‚¹ãƒˆå‡ºæ¥ã‚‹ãŒã€Dev Container ã§å‹•ã‹ã™éš›ã¯ CI ã¨åŒæ§˜ã« install æ™‚ã« `--with-deps` ãŒå¿…è¦ã€‚ã¨ã„ã†ã ã‘ã®è©±ã§ã¯ã‚ã‚‹ã®ã ãŒã€åœ°å‘³ã«ãƒãƒã£ãŸã®ã§ãƒ¡ãƒ¢ã«æ®‹ã™ã€‚

- https://playwright.dev/docs/chrome-extensions

```
$ npx playwright install --with-deps chromium
```

ã‚ã¨ã¯å…¬å¼ã«ã‚ã‚‹ã‚ˆã†ã« `channel: 'chromium'`  ã§ãƒ†ã‚¹ãƒˆç”¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œã‚Œã°ã‚ˆã„ã€‚

```ts
context = await chromium.launchPersistentContext('', {
  channel: 'chromium',
  args: [
    `--disable-extensions-except=${pathToExtension}`,
    `--load-extension=${pathToExtension}`,
  ],
});
```
å…¬å¼ã‚’èª­ã‚ã°å¤§ä½“è§£æ±ºã™ã‚‹è©±ãªã®ã ãŒã€ [Cline å‘ã‘ã« Chromium ã‚’ Dev Container ã«ç”¨æ„ã—ã¦ã„ãŸ](https://yaakai.to/blog/2025/fixing-roo-code-browser-issues-in-dev-container/)å½±éŸ¿ã‹ã€Claude Code ãŒæœ€åˆã®å‹•ãã‚‚ã®ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«è¨­å®šã—ã¦ãã¦å°‘ã—ãƒãƒã£ãŸã€‚

```ts
context = await chromium.launchPersistentContext('', {
  headless: true,
  args: [
    `--disable-extensions-except=${pathToExtension}`,
    `--load-extension=${pathToExtension}`,
  ],
  executablePath: '/usr/bin/chromium'
});
```

ã“ã‚Œã§ã‚‚å‹•ä½œã¯ã™ã‚‹ã®ã ãŒ(å…¬å¼ã«ã‚‚è¨˜è¼‰ã¯ã‚ã‚‹)ã€Chrome æ‹¡å¼µã§ãªã„ãƒ†ã‚¹ãƒˆã¯ `playwright install chromium` ã§å…¥ã‚ŒãŸã‚‚ã®ã‚’ä½¿ã†ã®ã§ Chromium ãŒ 2 ã¤å¿…è¦ã«ãªã‚‹ã€‚ã“ã‚Œã‚’ã¾ã¨ã‚ã‚‹æ–¹æ³•ãŒã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸãŒ  `channel` ã‚’ä½¿ã†ã¨ã“ã‚Œã‚’è§£æ±ºã§ãã‚‹ã€å…¬å¼ã‚’ã¡ã‚ƒã‚“ã¨èª­ã‚‚ã†ã€‚

ä»¥ä¸‹ã¯æœ€å°æ§‹æˆã®ãƒªãƒã‚¸ãƒˆãƒª:

- https://github.com/yaakaito/playwright-chrome-extension