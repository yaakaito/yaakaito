---
layout: ../../layouts/blog-post.astro
title: "Speculation Rules API ã‚’ä½¿ã£ãŸãƒšãƒ¼ã‚¸ã®äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°"
emoji: ğŸ–Š
date: 2024-08-19T14:53:42Z
tags:
    - note
---

`rel="prerender"` ã‚’åˆ©ç”¨ã—ãŸãƒšãƒ¼ã‚¸ã®äº‹å‰èª­ã¿è¾¼ã¿ã«å¤‰ã‚ã‚‹æ¬¡ä¸–ä»£ã® API ã¨ã—ã¦ã€ Speculation Rules API ã¨ã„ã†ã‚‚ã®ãŒ Chrome ã«å°å…¥ã•ã‚Œã¾ã—ãŸã€‚

- [Chrome ã§ãƒšãƒ¼ã‚¸ã‚’äº‹å‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ãƒšãƒ¼ã‚¸ ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å³æ™‚ã«è¡Œã† Â |Â  Web Platform Â |Â  Chrome for Developers](https://developer.chrome.com/docs/web-platform/prerender-pages?hl=ja)

`<script>` ã§æ¯”è¼ƒçš„ç°¡å˜ãªè¨˜è¿°ã‚’ã™ã‚‹ã ã‘ã§ãƒšãƒ¼ã‚¸ã®äº‹å‰æº–å‚™ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã€[å‰å›ã® View Transition API](https://yaakai.to/note/9/) ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªæ»‘ã‚‰ã‹ãªãƒšãƒ¼ã‚¸é·ç§»ã‚’å®Ÿç¾ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã‚ˆã†ã§ã™ã€‚View Transition API ã®ä¾‹ã‚’å…ƒã«ã™ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§é·ç§»å…ˆã®å†…å®¹ã‚’èª­ã¿è¾¼ã‚“ã§ãŠãã“ã¨ãŒã§ãã¾ã™ã€‚

```html
<!DOCTYPE html>
<html lang="en">
  <!-- ç•¥ -->
  <body>
    <nav>
      <ul>
        <li id="navHome">
          <a href="./index.html">ğŸ  Home</a>
        </li>
        <li id="navBlog">
          <a href="./blog.html">ğŸ–Š Blog</a>
        </li>
        <li id="navAbout">
          <a href="./about.html">ğŸ´ About</a>
        </li>
      </ul>
    </nav>
    <div id="mark"></div>
    <script type="speculationrules">
      {
        "prerender": [
          {
            "urls": ["about.html", "blog.html"]
          }
        ]
      }
    </script>
  </body>
</html>
```

å®Ÿéš›ã®å‹•ä½œã‚’æ¯”ã¹ã¦ã¿ã‚‹ã¨ã€View Transition API ã®ã¿ã§ã¯ä¸€åº¦é·ç§»ã—èª­ã¿è¾¼ã¿ãŒå®Œäº†ã™ã‚‹ã¾ã§å°‘ã—å¾…ã£ã¦ã‹ã‚‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹ã®ã«å¯¾ã—ã¦ã€Speculation Rules API ã‚‚è¶³ã™ã“ã¨ã§ã‚¯ãƒªãƒƒã‚¯ç›´å¾Œã«ç´ æ—©ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¨é·ç§»ãŒå‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

- [View Transition API ã®ã¿](https://yaakaito.github.io/code-sandbox/mp-view-transition/index.html)
- [Speculation Rules API ã‚ã‚Š](https://yaakaito.github.io/code-sandbox/speculation-rules/index.html)

DevTool ã§å‹•ä½œç¢ºèªã‚’è¡Œã†å ´åˆã€ `Application > Background Services > Speculative loads` ã‹ã‚‰å‹•ä½œã‚’ç¢ºèªã§ãã¾ã™ã€‚

ã¾ãŸã€JavaScript ã‹ã‚‰å‹•çš„ã«ãƒ«ãƒ¼ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

- https://developer.chrome.com/docs/web-platform/prerender-pages?hl=ja#add_speculation_rules_dynamically_through_javascript