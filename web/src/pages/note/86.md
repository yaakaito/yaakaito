---
layout: ../../layouts/blog-post.astro
title: "Biome v2 ã® GritQL ã§ã® Linter Plugins ã‚’è©¦ã™"
emoji: ğŸ–ï¸
date: 2025-06-25T13:50:37Z
tags:
    - note
---

Biome v2 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã€Î² ç‰ˆã®æ©Ÿèƒ½ã¨ã—ã¦ Linter Plugins ãŒè¿½åŠ ã•ã‚ŒãŸã€‚

- https://biomejs.dev/blog/biome-v2/
- https://biomejs.dev/linter/plugins/

å®Ÿè£…ã¯ GritQL ã«ã‚ˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’ãƒ™ãƒ¼ã‚¹ã«ä½œã‚‰ã‚Œã¦ã„ã¦ã€ç¾çŠ¶ Fix ã¯ã§ããšæ¤œå‡ºã®ã¿ã¨ãªã£ã¦ã„ã‚‹ã€‚

- https://docs.grit.io/

ã¾ã  Î² ç‰ˆã¨ã„ã†å‰æã¯ã‚ã‚Šã¤ã¤ã‚‚ã€ ESLint ã§ã‚„ã£ã¦ã„ã‚‹ã‚ˆã†ãª Monorepo å†…ã§ã®æœŸå¾…ã—ãªã„ import ã®æ¤œå‡ºãŒã§ãã‚Œã°ä¹—ã‚Šæ›ãˆ[^1]ãŒã§ãã‚‹ãªã¨æ€ã„ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ã‚’è©¦ã—ãŸã€‚

[^1]: https://yaakai.to/blog/2025/cline-repository-refactoring/ ã§ã“ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ«ãƒ¼ãƒ«ãŒæ›¸ããŸãã¦ Biome â†’ ESLint ã«ã—ãŸ

```gritql
or {
    `import $_ from $path`,
    `import { $_ } from $path`,
    `import * as $_ from $path`,
} where {
    $path <: `'@project/theModule'`,
    register_diagnostic(
        span = $path,
        message = "ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ theModule ã¸ä¾å­˜ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚",
        severity = "error"
    )
}
```

ã“ã‚Œã‚’åŒã˜ã v2 ã§è¿½åŠ ã•ã‚ŒãŸ Monorepo ã‚µãƒãƒ¼ãƒˆã¨å…¼ç”¨ã—ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸äº‹ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€æ³¥è‡­ã„ãªãŒã‚‰ã‚‚æœŸå¾…ã™ã‚‹ã‚‚ã®ã¯ã‚ã‚‹ç¨‹åº¦å®Ÿç¾ã§ãã‚‹ã€‚ãŸã ã€Side Effect Import ã®å ´åˆã«ã†ã¾ãã„ã‹ãšã€ä»¥ä¸‹ãŒå‹•ä½œã†ã¾ãã—ãªãã¦ãƒãƒã£ã¦ã„ãŸã€‚

```gritql
`import $path` where {
    $path <: `'@project/theModule'`,
    register_diagnostic(
        span = $path,
        message = "ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‹ã‚‰ theModule ã¸ä¾å­˜ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ã¾ã›ã‚“ã€‚",
        severity = "error"
    )
}
```

`$path` å‘¨ã‚Šã®è¨˜è¿°ã®ä»•æ–¹ã‚’ã„ãã¤ã‹è©¦ã—ãŸãŒã€ `biome search` ã§ã‚‚ãƒãƒƒãƒãƒ³ã‚°ãŒã†ã¾ãã„ã‹ãªã‹ã£ãŸã€‚

```
$ npx biome search '`import $path`' 
Searched 57 files in 95ms. Found 0 matches.
```

ä¸€æ–¹ã§ä»¥ä¸‹ã¯å‹•ä½œã™ã‚‹ã®ã§ã€å˜ç´”ã«å®Ÿè£…ãŒé–“ã«åˆã£ã¦ã„ãªã„ã ã‘ãªã®ã‹ã‚‚ã—ã‚Œãªã„ãŒè©³ã—ãã¯èª¿ã¹ã¦ã„ãªã„ã€‚

```gritql
`import '$_'` as $import where {
    register_diagnostic(
        span = $import,
        message = "Side Effect Import ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚",
        severity = "error"
    )
}
```

## Refs

ã“ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã§ Rust ç³»ã®ãƒ„ãƒ¼ãƒ«ã‚‚ Plugin ã‚·ã‚¹ãƒ†ãƒ ã«å¯¾å¿œã—ã¤ã¤ã‚ã‚‹ã“ã¨ã‚’çŸ¥ã£ãŸ

- https://speakerdeck.com/unvalley/typescript-linters