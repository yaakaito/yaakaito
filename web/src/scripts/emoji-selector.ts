/**
 * Noteè¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚„å†…å®¹ã«åŸºã¥ã„ã¦çµµæ–‡å­—ã‚’è‡ªå‹•é¸æŠã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
 */

// ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®çµµæ–‡å­—ã‚»ãƒƒãƒˆ
const emojiSets: Record<string, string[]> = {
  // é–‹ç™ºãƒ»ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é–¢é€£
  development: ['ğŸ’»', 'ğŸ‘¨â€ğŸ’»', 'ğŸ‘©â€ğŸ’»', 'ğŸ§‘â€ğŸ’»', 'âŒ¨ï¸', 'ğŸ–¥ï¸', 'ğŸš€', 'âš™ï¸', 'ğŸ”§', 'ğŸ”¨', 'ğŸ› ï¸', 'ğŸ§°'],

  // ãƒ‡ã‚¶ã‚¤ãƒ³é–¢é€£
  design: ['ğŸ¨', 'ğŸ–Œï¸', 'ğŸ–ï¸', 'âœï¸', 'ğŸ“', 'ğŸ“', 'ğŸ­', 'ğŸ‘ï¸', 'ğŸ”'],

  // ãƒ¡ãƒ¢ãƒ»ãƒãƒ¼ãƒˆé–¢é€£
  notes: ['ğŸ“', 'âœï¸', 'ğŸ–Šï¸', 'ğŸ““', 'ğŸ“”', 'ğŸ“’', 'ğŸ“•', 'ğŸ“—', 'ğŸ“˜', 'ğŸ“™'],

  // ã‚¦ã‚§ãƒ–ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆé–¢é€£
  web: ['ğŸŒ', 'ğŸ”—', 'ğŸ“¡', 'ğŸ“±', 'ğŸ“¶', 'ğŸŒ', 'ğŸŒ', 'ğŸŒ'],

  // æ™‚é–“ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é–¢é€£
  time: ['â°', 'â±ï¸', 'â²ï¸', 'ğŸ•°ï¸', 'ğŸ“…', 'ğŸ“†', 'ğŸ—“ï¸', 'âŒ›', 'â³'],

  // ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ»æ€è€ƒé–¢é€£
  idea: ['ğŸ’¡', 'ğŸ§ ', 'ğŸ¤”', 'ğŸ’­', 'âœ¨', 'ğŸ”®'],

  // ãƒ‡ãƒ¼ã‚¿ãƒ»åˆ†æé–¢é€£
  data: ['ğŸ“Š', 'ğŸ“ˆ', 'ğŸ“‰', 'ğŸ§®', 'ğŸ”¢', 'ğŸ“‘', 'ğŸ“‹'],

  // ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£
  communication: ['ğŸ’¬', 'ğŸ—£ï¸', 'ğŸ“¢', 'ğŸ“£', 'ğŸ“®', 'ğŸ“§', 'âœ‰ï¸', 'ğŸ“©', 'ğŸ“¨'],

  // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£
  security: ['ğŸ”’', 'ğŸ”“', 'ğŸ”', 'ğŸ”‘', 'ğŸ—ï¸', 'ğŸ›¡ï¸'],

  // å®Ÿé¨“ãƒ»ãƒ†ã‚¹ãƒˆé–¢é€£
  experiment: ['ğŸ§ª', 'ğŸ§«', 'ğŸ”¬', 'ğŸ”­', 'ğŸ§¬'],

  // ãã®ä»–
  misc: ['ğŸ“Œ', 'ğŸ“', 'ğŸ”–', 'ğŸ·ï¸', 'ğŸ’¼', 'ğŸ“', 'ğŸ“‚', 'ğŸ—‚ï¸', 'ğŸ“¤', 'ğŸ“¥', 'ğŸ“š', 'ğŸ²', 'ğŸ¯']
};

// ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ã‚«ãƒ†ã‚´ãƒªã®ãƒãƒƒãƒ”ãƒ³ã‚°
const keywordCategories: Record<string, string[]> = {
  // é–‹ç™ºãƒ»ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  development: [
    'code', 'ã‚³ãƒ¼ãƒ‰', 'ãƒ—ãƒ­ã‚°ãƒ©ãƒ ', 'program', 'dev', 'é–‹ç™º', 'ã‚¢ãƒ—ãƒª', 'app',
    'software', 'ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢', 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢', 'engineer', 'script', 'ã‚¹ã‚¯ãƒªãƒ—ãƒˆ',
    'function', 'é–¢æ•°', 'coding', 'ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°', 'debug', 'ãƒ‡ãƒãƒƒã‚°', 'api', 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹',
    'database', 'ãƒ—ãƒ©ã‚°ã‚¤ãƒ³', 'plugin', 'ã‚µãƒ¼ãƒãƒ¼', 'server', 'ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯', 'framework',
    'ãƒ©ã‚¤ãƒ–ãƒ©ãƒª', 'library', 'npm', 'git', 'ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«', 'compile'
  ],

  // ãƒ‡ã‚¶ã‚¤ãƒ³é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  design: [
    'design', 'ãƒ‡ã‚¶ã‚¤ãƒ³', 'ui', 'ux', 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹', 'interface', 'ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯',
    'graphic', 'layout', 'ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ', 'color', 'è‰²', 'ã‚¹ã‚¿ã‚¤ãƒ«', 'style', 'ãƒ•ã‚©ãƒ³ãƒˆ',
    'font', 'ã‚¢ã‚¤ã‚³ãƒ³', 'icon', 'ãƒ­ã‚´', 'logo', 'ã‚¤ãƒ©ã‚¹ãƒˆ', 'illustration', 'ç”»åƒ',
    'image', 'ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼', 'designer', 'css'
  ],

  // ãƒ¡ãƒ¢ãƒ»ãƒãƒ¼ãƒˆé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  notes: [
    'note', 'ãƒãƒ¼ãƒˆ', 'ãƒ¡ãƒ¢', 'memo', 'ãƒ¡ãƒ¢ãƒ©ãƒ³ãƒ€ãƒ ', 'memorandum', 'æ›¸ãç•™ã‚', 'jot',
    'reminder', 'ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼', 'todo', 'ã‚¿ã‚¹ã‚¯', 'task', 'ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ', 'checklist'
  ],

  // ã‚¦ã‚§ãƒ–ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  web: [
    'web', 'ã‚¦ã‚§ãƒ–', 'ã‚µã‚¤ãƒˆ', 'site', 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ', 'internet', 'ãƒ–ãƒ©ã‚¦ã‚¶', 'browser',
    'html', 'css', 'javascript', 'js', 'http', 'https', 'ãƒ‰ãƒ¡ã‚¤ãƒ³', 'domain', 'url',
    'ãƒªãƒ³ã‚¯', 'link', 'ã‚»ãƒƒã‚·ãƒ§ãƒ³', 'session', 'cookie', 'ã‚¯ãƒƒã‚­ãƒ¼', 'ã‚µãƒ¼ãƒãƒ¼', 'server',
    'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ', 'client', 'ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–', 'responsive', 'ãƒ¢ãƒã‚¤ãƒ«', 'mobile'
  ],

  // æ™‚é–“ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  time: [
    'time', 'æ™‚é–“', 'æ—¥æ™‚', 'date', 'ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«', 'schedule', 'äºˆå®š', 'ç· ã‚åˆ‡ã‚Š',
    'deadline', 'æœŸé™', 'ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼', 'calendar', 'æ™‚è¨ˆ', 'clock', 'åˆ†', 'minute',
    'ç§’', 'second', 'æ—¥', 'day', 'æœˆ', 'month', 'å¹´', 'year', 'é€±', 'week'
  ],

  // ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ»æ€è€ƒé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  idea: [
    'idea', 'ã‚¢ã‚¤ãƒ‡ã‚¢', 'æ€è€ƒ', 'thinking', 'è€ƒãˆ', 'thought', 'ã²ã‚‰ã‚ã', 'inspiration',
    'ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³', 'å‰µé€ ', 'creation', 'å‰µé€ çš„', 'creative', 'ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³',
    'innovation', 'ãƒ–ãƒ¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒŸãƒ³ã‚°', 'brainstorming', 'ç™ºæƒ³', 'concept', 'ã‚³ãƒ³ã‚»ãƒ—ãƒˆ'
  ],

  // ãƒ‡ãƒ¼ã‚¿ãƒ»åˆ†æé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  data: [
    'data', 'ãƒ‡ãƒ¼ã‚¿', 'åˆ†æ', 'analysis', 'çµ±è¨ˆ', 'statistics', 'ã‚°ãƒ©ãƒ•', 'graph',
    'ãƒãƒ£ãƒ¼ãƒˆ', 'chart', 'æ•°å€¤', 'number', 'æ•°å­—', 'figure', 'ãƒ¬ãƒãƒ¼ãƒˆ', 'report',
    'æŒ‡æ¨™', 'metric', 'kpi', 'æ¸¬å®š', 'measurement', 'ãƒã‚¤ãƒ‹ãƒ³ã‚°', 'mining'
  ],

  // ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  communication: [
    'communication', 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³', 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸', 'message', 'ä¼šè©±', 'conversation',
    'ãƒãƒ£ãƒƒãƒˆ', 'chat', 'ãƒˆãƒ¼ã‚¯', 'talk', 'ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³', 'discussion', 'ãƒ¡ãƒ¼ãƒ«',
    'email', 'æ‰‹ç´™', 'letter', 'é€šçŸ¥', 'notification', 'ã‚¢ãƒŠã‚¦ãƒ³ã‚¹', 'announcement',
    'ãƒ‹ãƒ¥ãƒ¼ã‚¹', 'news', 'ã‚³ãƒ¡ãƒ³ãƒˆ', 'comment', 'ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯', 'feedback'
  ],

  // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  security: [
    'security', 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', 'å®‰å…¨', 'safety', 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼', 'privacy', 'ä¿è­·',
    'protection', 'æš—å·åŒ–', 'encryption', 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰', 'password', 'èªè¨¼', 'authentication',
    'èªå¯', 'authorization', 'ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«', 'firewall', 'ãƒãƒƒã‚­ãƒ³ã‚°', 'hacking'
  ],

  // å®Ÿé¨“ãƒ»ãƒ†ã‚¹ãƒˆé–¢é€£ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  experiment: [
    'experiment', 'å®Ÿé¨“', 'ãƒ†ã‚¹ãƒˆ', 'test', 'æ¤œè¨¼', 'validation', 'ç¢ºèª', 'verification',
    'ãƒˆãƒ©ã‚¤ã‚¢ãƒ«', 'trial', 'ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—', 'prototype', 'PoC', 'proof of concept',
    'ãƒ™ãƒ¼ã‚¿', 'beta', 'ã‚¢ãƒ«ãƒ•ã‚¡', 'alpha', 'ç ”ç©¶', 'research', 'èª¿æŸ»', 'investigation'
  ]
};

/**
 * ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‹ã‚‰ã‚«ãƒ†ã‚´ãƒªã‚’æ¨æ¸¬ã™ã‚‹
 * @param {string} title - è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
 * @param {string} content - è¨˜äº‹ã®å†…å®¹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
 * @returns {string} - æ¨æ¸¬ã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒª
 */
function guessCategory(title: string, content: string = ''): string {
  // ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‚’çµåˆã—ã¦å°æ–‡å­—åŒ–
  const text = (title + ' ' + content).toLowerCase();

  // å„ã‚«ãƒ†ã‚´ãƒªã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¨ãƒãƒƒãƒã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  for (const [category, keywords] of Object.entries(keywordCategories)) {
    for (const keyword of keywords) {
      if (text.includes(keyword.toLowerCase())) {
        return category;
      }
    }
  }

  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯notes
  return 'notes';
}

/**
 * ã‚«ãƒ†ã‚´ãƒªã«åŸºã¥ã„ã¦çµµæ–‡å­—ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸æŠ
 * @param {string} category - è¨˜äº‹ã®ã‚«ãƒ†ã‚´ãƒª
 * @returns {string} - é¸æŠã•ã‚ŒãŸçµµæ–‡å­—
 */
function getRandomEmojiForCategory(category: string): string {
  const emojis = emojiSets[category] || emojiSets.notes;
  const randomIndex = Math.floor(Math.random() * emojis.length);
  return emojis[randomIndex];
}

/**
 * ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã‹ã‚‰çµµæ–‡å­—ã‚’è‡ªå‹•é¸æŠ
 * @param {string} title - è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
 * @param {string} content - è¨˜äº‹ã®å†…å®¹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
 * @returns {string} - é¸æŠã•ã‚ŒãŸçµµæ–‡å­—
 */
export function selectEmoji(title: string, content: string = ''): string {
  const category = guessCategory(title, content);
  return getRandomEmojiForCategory(category);
}

export default selectEmoji;
